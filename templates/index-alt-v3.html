<!DOCTYPE html>
<html>
<head>
	<title>Abdush Shakoor's Blog</title>
	<base href="/"/>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="author" content="Abdush Shakoor">
	<meta name="description" content="Writings about Computer Science, Mathematics, Software Engineering and lots of cool stuff.">
	<link href="/static/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
	<link rel="stylesheet" href="/static/css/style.css" type="text/css"/>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
</head>
<body>
	<main>
		<!-- Website header -->
		<header class="navbar">
			<a class="logo-link" href="/">
				<div class="header-logo">
					<img src="/static/images/avatar2.gif"/>
					<div class="logo-text">
						<p class="logo-title">mega<span class="trademark">color</span>boy</p>
						<p class="logo-subtitle">The blog of Abdush Shakoor</p>
					</div>
				</div>
			</a>
			<ul class="header-links">
				<li><a href="/">Writings</a></li>
				<!-- <li><a href="#">Projects</a></li> -->
				<li><a href="/about">About me</a></li>
			</ul>
		</header>
		<!-- Website header -->

		<h2 class="title">Writings about Computer Science, Mathematics, Software Engineering and lots of cool stuff.</h2>

		<div class="posts-grid">
			{% for post in posts %}
			<a href="posts/{{ post.slug }}/">
				<div class="posts-card">
					<canvas id="{{ post.slug }}_canvas" class="pc-canvas" style="display: none;"></canvas>
					<div class="pc-header">
						<div class="pc-head-info">
							<div class="pc-head-author"><p>{{ post.date }}</p></div>
							<!-- <div class="clear-line {{ bg_color }}"></div> -->
						</div>
					</div>
					<div class="pc-body">
						<h4>{{ post.title }}</h4>
					</div>
					<div class="pc-footer">
						<p>{{ post.category }}</p>
					</div>
				</div>
			</a>
			{% endfor %}
		</div>

	</main>
</body>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-98290003-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98290003-2');
</script>
<script defer type="text/javascript">

	var colorRange = 3;
	var pixelSize = 5;
	// var colors = [];

	function getRandomColor()
	{
		var letters = "0123456789ABCDEF".split('');
		var color = "#";
		for(var i=0; i<6; i++)
		{
			color += letters[Math.floor(Math.random() * letters.length)];
		}
		return color;
	}

	function generateColors(colorRange){
		var colors = [];
		for(var i=0; i<colorRange; i++)
		{
			colors[i] = getRandomColor();
		}
		return colors;
	}

	function generateCardPattern(canvas, colorRange, pixelSize)
	{
		var ctx = canvas.getContext("2d");

		var x, y;

		//Clear canvas
		ctx.clearRect(0, 0, canvas.width, canvas.height);
		
		colors = generateColors(colorRange);

		for(y=0; y<=canvas.height; y+=pixelSize)
		{
			for(x=0; x<=canvas.width; x+=pixelSize)
			{
				//Random color per pixel
				ctx.fillStyle = colors[Math.floor(Math.random() * colors.length)];
				ctx.fillRect(x, y, pixelSize, pixelSize);
			}
		}

		var pattern = canvas.toDataURL();
		return pattern;
	}

	var cards = document.getElementsByClassName("posts-card");
	var card_canvases = document.querySelectorAll(".posts-card .pc-canvas");

	for(var i=0; i<cards.length; i++)
	{
		var canvas = card_canvases[i];
		var canvasID = canvas.id;
		var card = cards[i];

		//Generate pattern
		var pattern = generateCardPattern(canvas, colorRange, pixelSize);
		card.style.background = `url('` + pattern + `')`;

		card.removeChild(canvas);
	}

</script>
</html>